/*!  1.3.3 2016-03-03 22:55 */
CHARITABLE_ADMIN={},CHARITABLE_ADMIN.SetupDatepicker=function(a){var b=jQuery.noConflict();a.datepicker({dateFormat:"MM d, yy",minDate:b(this).data("min-date")||"",beforeShow:function(a,c){b("#ui-datepicker-div").addClass("charitable-datepicker-table")}}),a.each(function(){b(this).data("date")&&b(this).datepicker("setDate",b(this).data("date")),b(this).data("min-date")&&b(this).datepicker("option","minDate",b(this).data("min-date"))})},function(a){var b=function(){a("[data-charitable-action]").on("click",function(b){var c=a(this).data("charitable-args")||{},d="charitable-"+a(this).data("charitable-action");return a.post(ajaxurl,{action:d,data:c},function(a){console.log("Response: "+a)}),!1})},c=function(){a("[data-charitable-toggle]").on("click",function(b){var c=a(this).data("charitable-toggle"),d=a(this).attr("data-charitable-toggle-text");return d&&d.length&&(a(this).attr("data-charitable-toggle-text",a(this).text()),a(this).text(d)),a("#"+c).toggle(),!1})},d=function(){var b=a("#charitable-campaign-advanced-metabox");b.tabs();var c=b.find(".charitable-tabs").height();b.find(".ui-tabs-panel").each(function(){a(this).css("min-height",c)})},e=function(){a(".charitable-campaign-suggested-donations tbody").sortable({items:"tr:not(.to-copy)",handle:".handle",stop:function(a,b){h()}})},f=function(a){var b=a.closest(".charitable-campaign-suggested-donations").find("tbody"),c=b.find("tr.to-copy").clone().removeClass("to-copy hidden");b.find(".no-suggested-amounts").hide(),b.append(c),h()},g=function(a){console.log(a),a.closest("tr").remove();var b=a.closest(".charitable-campaign-suggested-donations").find("tbody");1==b.find("tr:not(.to-copy)").length&&b.find(".no-suggested-amounts").removeClass("hidden").show(),h()},h=function(){a(".charitable-campaign-suggested-donations tbody").each(function(){a(this).children("tr").not(".no-suggested-amounts .to-copy").each(function(b){a(this).data("index",b),a(this).find("input").each(function(a){this.name=this.name.replace(/(\[\d\])/,"["+b+"]")})})})},i=function(){var b=a("#charitable_dashboard_donations");b.length&&a.ajax({type:"GET",data:{action:"charitable_load_dashboard_donations_widget"},url:ajaxurl,success:function(a){b.find(".inside").html(a)}})};a(document).ready(function(){a.fn.datepicker&&CHARITABLE_ADMIN.SetupDatepicker(a(".charitable-datepicker")),a("body.post-type-campaign .handlediv, body.post-type-donation .handlediv").remove(),a("body.post-type-campaign .hndle, body.post-type-donation .hndle").removeClass("hndle ui-sortable-handle").addClass("postbox-title"),d(),e(),b(),c(),i(),a("[data-charitable-add-row]").on("click",function(){var b=a(this).data("charitable-add-row");return"suggested-amount"===b&&f(a(this)),!1}),a(".charitable-campaign-suggested-donations").on("click",".charitable-delete-row",function(){return console.log("clicked"),g(a(this)),!1}),a("body").on("click","[data-campaign-benefactor-delete]",function(){var b=a(this).parents(".charitable-benefactor"),c={action:"charitable_delete_benefactor",benefactor_id:a(this).data("campaign-benefactor-delete"),nonce:a(this).data("nonce")};return a.ajax({type:"POST",data:c,dataType:"json",url:ajaxurl,xhrFields:{withCredentials:!0},success:function(a){a.deleted&&b.remove()}}).fail(function(a){window.console&&window.console.log&&(console.log("failture"),console.log(a))}),!1}),a("#change-donation-status").on("change",function(){a(this).parents("form").submit()})})}(jQuery);